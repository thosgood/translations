\documentclass{article}

\usepackage[margin=1.6in]{geometry}

\title{$\TT$-categories\\(Categories in a triple)}
\author{Albert Burroni}
\date{}

\newcommand{\origcit}{%
  \textsc{Burroni, Albert.}
  ``$T$-catégories (catégories dans un triple)''.
  \emph{Cahiers de Topologie et Géométrie différentielle catègoriques} \textbf{12} (1971), 215--321.
  {\url{http://www.numdam.org/item?id=CTGDC_1971__12_3_215_0}}
}


%% Standards %%

\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{hyperref}
\usepackage[nameinlink,noabbrev,capitalize]{cleveref}
\usepackage{xcolor}
\hypersetup{colorlinks,linkcolor={blue!50!black},citecolor={blue!50!black},urlcolor={blue!80!black}}
\usepackage{enumerate}
\usepackage{graphicx}
\usepackage{tikz-cd}


%% Typography %%

\usepackage{fouriernc}
\usepackage[cal=esstix,scr=rsfs]{mathalpha}

\usetikzlibrary{arrows,arrows.meta}
\tikzcdset{arrow style=tikz, diagrams={>=latex}}


%% Environments %%

\usepackage[labelsep=period]{caption}

\usepackage{amsthm}

\renewenvironment{abstract}{%
  \quotation
  \normalsize
  \begin{center}\textbf{{\abstractname}}\end{center}
  \par\smallskip\noindent
}{\endquotation}

\newenvironment{translator}[1]
  {\phantomsection\par\medskip\noindent\small\textbf{#1.}\itshape}
  {\par\medskip}

\newenvironment{itenv}[1]
  {\phantomsection\par\medskip\noindent\textbf{#1.}\itshape}
  {\par\medskip}

\newenvironment{rmenv}[1]
  {\phantomsection\par\medskip\noindent\textbf{#1.}\rmfamily}
  {\par\medskip}


%% Shortcuts %%

\newcommand{\oldpage}[1]{\marginpar{\footnotesize$\Big\vert$ \textit{p.~#1}}}

\newcommand{\todo}{{\color{purple}\textbf{TO-DO }}}
\newcommand{\unsure}[1]{{\color{purple}\textbf{#1}}}

\newcommand{\id}{\mathrm{id}}
\newcommand{\TT}{\mathbf{T}}
\newcommand{\textand}{\quad\text{and}\quad}

\newcommand{\cat}[1]{\mathcal{#1}}
\newcommand{\Cat}[1]{\mathsf{#1}}
\newcommand{\set}[1]{|#1|}

\newcommand{\Gr}[1]{\Cat{Gr}(#1)}
\newcommand{\Alg}[1]{\Cat{Alg}(#1)}
\newcommand{\Ord}[1]{\Cat{Ord}(#1)}
\newcommand{\Kl}[1]{\Cat{Kl}(#1)}

\DeclareMathOperator{\Hom}{Hom}


%% Links and references %%

\crefname{section}{\S\!\!}{\S\S\!\!}

\usepackage[backend=bibtex]{biblatex}
\addbibresource{\jobname.bib}
\renewbibmacro{in:}{%
  \ifboolexpr{%
     test {\ifentrytype{article}}%
  }{}{\printtext{\bibstring{in}\intitlepunct}}%
}


%% Git version %%

\usepackage{fancyhdr}
\usepackage{lastpage}
\usepackage{xstring}
\pagestyle{fancy}
\fancypagestyle{plain}{}
\fancyhf{}
  \renewcommand{\headrulewidth}{0pt}%
\cfoot{\small\thepage\ of \pageref*{LastPage}}
\newif\ifserver
\serverfalse
\lfoot{\footnotesize\ifserver{Git commit: \href{https://github.com/thosgood/translations/commit/GitCommitHashVariable}{GitCommitHashVariable}}\fi}


%% Document %%

\usepackage{embedall}
\begin{document}

\maketitle

\begin{translator}{Note from the translator}
  This document is a translation from French of the article

  \medskip
  {\normalfont\origcit}

  \medskip
  {\noindent}produced with kind permission from \todo{permissions}

  \hfill--- Timothy Hosgood (translator)
\end{translator}


%% Introduction %%

\section*{Introduction}

\hfill\emph{In friendly homage to José Luis Viviente.}

\bigskip

\oldpage{215}
If $\TT$ is a triple on a category $\cat{E}$, then $\TT$-categories are more general structures than $\TT$-algebras; they correspond to the passage from ``everywhere-defined laws'' to ``partially defined laws'' (in a very broad sense, in fact) and thus also encompass structures as diverse as topologies and categories.

Manes showed, in \cite{Ma}, that the category of compact topological spaces is a category of $\TT$-algebras, where $\TT$ is the triple of ultrafilters on $\cat{E}=\Cat{Set}$.
This led Barr, in \cite{Ba}, to define ``relational $\TT$-algebras'' so that the category of topological spaces is a category of ``relational $\TT$-algebras''.
But Barr seemed disappointed in the fact that, apart from this particular case, and that of preorders relative to the identity triple, there were few examples.
Independently, the new system of axioms for topologies that we had given in \cite{Bu} led us to a similar idea (unfortunately with the triple of filters\ldots but our goal was to situate topologies amongst quasi-topologies) that consisted in seeing topologies as a notion analogous to that of preorders (it is indicative, indeed, that the structure of a finite topology is equivalent to that of a finite preorder).
But this idea necessitated us to try passing from preorders to categories, and we found, in the definitions of Bénabou \cite{Be} of categories in terms of spans, what we needed in order to define $\TT$-categories.
We show (\cref{proposition-i.2.4}) that the ``relational $\TT$-algebras'' are obtained as a particular case: that of $\TT$-preorders (which are to $\TT$-categories what preorders are to categories).

\oldpage{216}
The general outline of this article is as follows.
\hyperref[sec:0]{Chapter~0} is dedicated to some details of terminology.
\hyperref[sec:i]{Chapter~I} first gives a definition of $\TT$-categories that demonstrates their relation to categories: if $\cat{E}=\Cat{Set}$, then the morphisms of a $\TT$-category appear, not as arrows going from one object to another object, but as arrows going from one structure on the objects to an object.
In this way, a ``convergence'' in a topology can be represented as an arrow $F\to x$ going from a filter to a point.
It is then easy to observe that these structures must be given by the endofunctor of a triple in order to be able to define the properties of reflexivity, transitivite, identity, and associativity of a $\TT$-category.
Then we will expand on some general properties: those that can we obtain without placing any hypotheses on the triple $\TT$, essentially the existence of projective limits and the fibration of the forgetful functor to $\cat{E}$ (which will allow us, in passing, to resolve the problem that consists of universally embedding the forgetful functor of $\TT$-algebras into a fibrant functor).
Other properties, such as the existence of inductive limits, the adjunction with the forgetful functor to $\TT$-graphs (the analogue of the Stone--Čech--Barr theorem), or the cofibration of the forgetful functor to $\cat{E}$ cannot be obtained unless we suppose the triple $\TT$ to be ``bounded''.

\hyperref{sec:ii}{Chapter~II} is essentially dedicated to two interpretations of $\TT$-categories, on one hand as monads (or monoids, if one prefers) in the ``Kleisli pseudo-category'', and on the other as pseudo-algebras in the ``bicatgeory of spans''.

\hyperref{sec:ii}{Chapter~III} gives various examples, of which the most detailed is that of multicategories (which generalise those defined by Lambek in \cite{La}).
For this, we have been led to study in Sections~\hyperref{sec:iii.1}{III.1} and \hyperref{sec:iii.2}{III.2} the particular case where $\TT$ is a ``strongly cartesian'' triple, which not only allows for the construction of free $\TT$-categories over the usual model of free monoids (see the Appendix), but also gives a manageable description of this structure.
\oldpage{217}
We will thus quantitatively improve the examples given by Barr, and we will also later study other useful examples, but this problem appeared less important to us long as our definition seems more natural and has a more general reach.

\hyperref{sec:iv}{Chapter~IV} is dedicated first of all to the description of various particular cases of $\TT$-functors, for example étale (or ``discrete fibration'') $\TT$-functors, and then a generalisation, of $\TT$-profunctors, that give an approach to $\TT$-natural transformations.

In a subsequent work, we will define tensor $\TT$-categories, that will give various ``coherence'' formulas, in particular those of the ``pseudo-categories'' introduced in \hyperref{sec:ii}{Chapter~II}.
We equally hope to undertake a homological study of these structure.

I would like, in closing, to express my thanks to Madame Bastiani, who encouraged me to work on this subject, and who reread the manuscript, which enabled me to correct numerous imperfections and sometimes errors.




%% Content %%

\clearpage
\tableofcontents


\clearpage
\setcounter{section}{-1}
\section{Terminology}
\label{sec:0}

\oldpage{219}

Categories generalise, at the same time, monoids and preorders;
we thus obtain two types of definitions of categories (and two choices of forgetful functors to sets).
The choice between these definitions depends most of all on practical necessities or the generalisations that we wish to obtain.
The relationship between these two definitions can be clarified by the notions of monad and polyad of Bénabou \cite{Be}.

We will find ourselves in such a situation due to the various structures that we introduce, and we will call these two types of definitions ``global'' and ``local'', respectively.
The only goal of the reminders below is the allow us to make precise the terminology and to give us a model of ``local'' definitions, but, of course, we suppose that the reader knows the elements of the theory of categories and of triples, and this chapter can be quickly skimmed over.


\subsection{Categories}

A \emph{category} is a quadruple $\cat{E}=(\set{\cat{E}}, \Hom_\cat{E}, \iota, \kappa)$ satisfying conditions~(1) to (6) below:

\begin{enumerate}
  \item[(1)] $\set{\cat{E}}$ is a set; its elements are called \emph{objects of $\cat{E}$}.

  \item[(2)] $\Hom_\cat{E}$ is a family of sets (that we suppose to be disjoint from one another, and disjoint from $\set{\cat{E}}$, to simplify constructions; but this is rarely the case in practice and, in theory, it is not indispensable).
    This family is indexed by $\set{\cat{E}}^2$, and the relations
    \[
      e\in\set{\cat{E}},
      e'\in\set{\cat{E}},
      f\in\Hom_\cat{E}(e',e)
    \]
    are expressed by simply saying that $f\colon e\to e'$ is a \emph{morphism} (in $\set{\cat{E}}$);
    we call $e$ the \emph{source of $f$} and $e'$ the \emph{target of $f$}.

  \item[(3)] $\iota$ is a family of maps of the form
    \[
      \iota(e)\colon \{\varnothing\}
      \to \Hom_\cat{E}(e,e),
    \]
    where the index $e$ runs over the set $\set{\cat{E}}$.
    We denote by $\id(e)$, $\id_e$, or even simply $e$, the morphism $\iota(e)(\varnothing)\colon e\to e$.
    \oldpage{220}
    (This is a sophisticated way of giving a family of morphisms $\id_e\colon e\to e$, where $e\in\set{\cat{E}}$).

  \item[(4)] $\kappa$ is a family of maps of the form
    \[
      \kappa(e'',e',e)\colon
      \Hom_\cat{E}(e'',e')\times\Hom_\cat{E}(e',e)
      \to \Hom_\cat{E}(e'',e),
    \]
    where the index $(e'',e',e)$ runs over the set $\set{\cat{E}}^3$.
    We generally denote by $g\cdot f$ the composite, i.e. the image under such a map of a pair $(g,f)$.

  \item[(5)] If $f\colon e\to e'$ is a morphism in $\cat{E}$, then
    \[
      f\cdot\id_e
      = f
      = \id_{e'}\cdot f.
    \]

  \item[(6)] If $f\colon e\to e'$, $g\colon e'\to e''$, and $h\colon e''\to e'''$ are ``consecutive'' morphisms in $\cat{E}$, then
    \[
      h\cdot(g\cdot f)
      = (h\cdot g)\cdot f,
    \]
    which allows to us to denote this morphism by $h\cdot g\cdot f$.
\end{enumerate}

A pair $(\set{\cat{E}},\Hom_\cat{E})$ satisfying conditions~1 and 2 is called a \emph{graph}; a triple $(\set{\cat{E}},\Hom_\cat{E},\iota)$ satisfying conditions~1, 2, and 3 is called a \emph{pointed graph}; and in both cases we use the corresponding terminology of conditions~1, 2, and 3.

We say that $F\colon\cat{E}\to\cat{E}'$ is a \emph{functor} if $\cat{E}$ and $\cat{E}'$ are categories and $F$ is a pair $(\set{F},F_1)$ such that

\begin{enumerate}
  \item[(1')] $\set{F}\colon\set{\cat{E}}\to\set{\cat{E}'}$ is a map.
    We denote simply by $F(e)$ the object $\set{F}(e)$, for all $e\in\set{\cat{E}}$.

  \item[(2')] $F_1$ is a family of maps of the form
    \[
      F_1(e',e)\colon
      \Hom_\cat{E}(e',e)
      \to \Hom_{\cat{E}'}(F(e'),F(e)),
    \]
    where the index $(e',e)$ runs over the set $\set{\cat{E}}^2$.
    If $f\colon e\to e'$ is a morphism in $\cat{E}$, we denote simply by $F(f)$ the morphism $F_1(e',e)(f)$.

  \item[(3')] $F(\id_e)=\id_{F(e)}$ for all $e\in\set{\cat{E}}$.

  \item[(4')] $F(g\cdot f)=F(g)\cdot F(f)$, if $f\colon e\to e'$ and $g\colon e'\to e''$ are consecutive morphisms in $\cat{E}$.
\end{enumerate}

A \emph{natural transformation $I\colon F\to F'$}, where $F,F'\colon\cat{E}\to\cat{E}'$ are functors with the same source and target, is given by a family of morphisms in $\cat{E}'$ of the form $I(e)\colon F(e)\to F'(e)$, where the index $e$ runs over the set $\set{\cat{E}}$, such that for every morphism $f\colon e\to e'$ in $\cat{E}$ we have the relation $I(e')\cdot F(f)=F'(f)\cdot I(e)$.
\oldpage{221}
We denote by $\cat{E}'^{\cat{E}}$ the usual category whose objects are the functors $F\colon\cat{E}\to\cat{E}'$ and whose morphisms are the natural transformations between these functors.
The composition law in $\cat{E}'^{\cat{E}}$ will generally borrow the notation from that of $\cat{E}'$, which risks producing confusion.
Indeed, if $F\colon\cat{E}\to\cat{E}'$ and $G\colon\cat{E}'\to\cat{E}''$ are consecutive functors, then we denote by $G\cdot F\colon\cat{E}\to\cat{E}''$ the usual composite.
Such a composition extends to natural transformations: if $I\colon F\to F'$ is a morphism in $\cat{E}'^{\cat{E}}$ and $J\colon G\to G'$ a morphism in $\cat{E}''^{\cat{E}'}$, then we define a composite $J\cdot I\colon G\cdot F\to G'\cdot F'$ by the formula
\[
  (J\cdot I)(e)
  = J(F'(e))\cdot G(I(e))
  = G'(I(e))\cdot J(F(e)).
\]
But the notation of a dot for this composition risks being confused with the composition in $\cat{E}^\cat{E}$, when, for example, $\cat{E}=\cat{E}'=\cat{E}''$ and the composition in $\cat{E}$ is denoted by a dot.
Also, even though we generally denote by a point the compositions of ``morphisms between structures'', we often denote by $JI$ the composite $J\cdot I$ above, so that, for example, we can write
\[
  JI
  = JF'\cdot GI
  = G'I\cdot JF.
\]

Similarly, we often write $Fe$, $Ff$, and $Ie$ instead of $F(e)$, $F(f)$, and $I(e)$, respectively; this convention is used most of all when the previous convention on the notation $JI$ instead of $J\cdot I$ is in force.

As for \emph{limits}, we adopt the following notation: if $e\in\set{\cat{E}}$, and if $\phi\colon \cat{A}\to\cat{E}$ is a functor, then we say that $C\colon e\to\phi$ is a \emph{projective cone} if $C$ is a family of morphisms in $\cat{E}$, called the \emph{canonical projections of $C$}, of the form $C(n)\colon e\to\phi(n)$ for all $n\in\set{\cat{A}}$ such that, for every morphism $x\colon n\to n'$ in $\cat{A}$, we have that $\phi(x)\cdot C(n)=C(n')$.
We say that the projective cone $C$ is a \emph{projective limit}, or simply that $e$ is the \emph{projective limit of $\phi$}, if, for every projective cone of the form $C'\colon e'\to\phi$, there exists exactly one morphism $f\colon e'\to e$ in $\cat{E}$ such that $C'(n)=C(n)\cdot f$ for all $n\in\set{\cat{A}}$.
We call $f$ the \emph{\unsure{bracket} of $C'$ compared with} (or \emph{with respect to}) the limit $C$.
This terminology is often modified for particular limits: products, fibre products, various diagrams.
For example, we say that the following commutative diagram
\oldpage{222}
\[
  \begin{tikzcd}[sep=huge]
    e'' \ar[d,swap,"g"]
  & \pi \ar[l,swap,"v_2"] \ar[d,"v_1"]
  \\e
  & e' \ar[l,"f"]
  \end{tikzcd}
\]
is a \emph{cartesian square}, or a \emph{fibre product}\footnote{This terminology supposes that we consider the diagram as oriented within the plane.}, or we say that $(v_1,v_2)$, or simply $\pi$, is a \emph{fibre product} of $(f,g)$, if the relation $f\cdot f'=g\cdot g'$ in $\cat{E}$ implies the existence and universality of a \unsure{bracket} $h$ such that $f'=v_1\cdot h$ and $g'=v_2\cdot h$.
We use analogous conventions for inductive limits, but the expression ``canonical projection''  should be replaced by \emph{canonical injection}.
We say that $\cat{E}$ \emph{admits projective $\cat{A}$-limits}, for example, if, for every $\phi\in\set{\cat{E}^\cat{A}}$, there exists a projective limit $C\colon e\to\phi$;
and if we have chosen such a limit for all $\phi$, we say that $\cat{E}$ is endowed with a \emph{canonical} (or \emph{official}) choice of projective $\cat{A}$-limits.
We use analogous conventions for fibre products, inductive limits, etc. \ldots.
Often such a choice is classical and is made tacitly.

We will not cover the notion of a functor \emph{commuting with limits}, nor that of limits commuting with one another;
these notions are clear enough.

Recall that, if $C\colon\phi\to e$ is an inductive cone, where $\phi\colon\cat{A}\to\cat{E}$ is a functor, if $f\colon e'\to e$ is a morphism in $\cat{E}$, and if we can form, for all $n\in\set{\cat{A}}$, a fibre product
\[
  \begin{tikzcd}[sep=huge]
    \phi(n) \ar[d,swap,"C(n)"]
  & \phi'(n) \ar[l,swap,"t(n)"] \ar[d,"C'(n)"]
  \\e
  & e' \ar[l,"f"]
  \end{tikzcd}
\]
then the family $\phi'(n)$ extends to a functor $\phi'\colon\cat{A}\to\cat{E}$ in a way entirely determined by the condition that $t\colon\phi'\to\phi$ be a natural transformation.
We say that the cone $C'\colon\phi'\to e'$ is obtained by the \emph{change of base $f$}, and we sometimes denote it by $f^*C$.
We say that, in $\cat{E}$, the \emph{inductive $\cat{A}$-limits are universal} if, whenever $C$ is an inductive $\cat{A}$-limit and $C'$ exists, then $C'$ is an inductive $\cat{A}$-limit.


\subsection{Triples}

\oldpage{223}
Let $\cat{E}$ be a category.
We say that $\TT=(T,I,K)$ is a \emph{triple} on $\cat{E}$ if $T\colon\cat{E}\to\cat{E}$ is a functor, and $I\colon\id_\cat{E}\to T$ and $K\colon TT\to T$ are natural transformations such that
\[
  \begin{gathered}
    K\cdot TI
    = T
    = K\cdot IT
  \\K\cdot TK
    = K\cdot KT
  \end{gathered}
  \tag{1}
\]
We say that $(M,m)\colon\TT\to\TT'$ is a \emph{morphism of triples} if $\TT=(T,I,K)$ is a triple on $\cat{E}$, $\TT'=(T',I',K')$ is a triple on another category $\cat{E}'$, $M\colon\cat{E}\to\cat{E}'$ is a functor, and $m\colon T'M\to MT$ is a natural transformation such that
\[
  \begin{aligned}
    m\cdot I'M
  & = MI
  \\m\cdot K'M
  & = MK\cdot mT\cdot T'm.
  \end{aligned}
  \tag{2}
\]
In general, when there is no risk of confusion, we use the same notation $I$ and $K$ for all triples.

We say that the functor $F\colon\cat{E}\to\overline{\cat{E}}$ is an \emph{adjoint functor} of the functor $U\colon\overline{\cat{E}}\to\cat{E}$ if there exist natural transformations $I\colon\id_\cat{E}\to UF$ and $\overline{I}\colon FU\to\id_{\overline{\cat{E}}}$ such that
\[
  \begin{aligned}
    U\overline{I}\cdot IU
  & = U
  \\\overline{I}F\cdot FI
  & = F.
  \end{aligned}
  \tag{3}
\]
For all $e\in\set{\cat{E}}$, we call $Ie$ the \emph{adjunction morphism} associated to $e$; for all $\overline{e}\in\set{\overline{\cat{E}}}$, we call $\overline{I}\overline{e}$ the \emph{coadjunction morphism} associated to $\overline{e}$.
We will show that $\TT=(UF,I,U\overline{I}F)$ is a triple on $\cat{E}$: we say that it is \emph{induced from the adjoint pair $(F,U)$};
it depends on the choice (tacit, in general) of $I$ and $\overline{I}$.

Recall that, if $\TT$ is a triple on $\cat{E}$, then we denote by $\Alg{\TT}$ the category of \emph{$\TT$-algebras}: a $\TT$-algebra on $e\in{\set{\cat{E}}}$ is a morphism in $\cat{E}$ of the form $b\colon Te\to e$ such that
\[
  \begin{aligned}
    b\cdot Ie
    &= e
  \\b\cdot Ke
    &= b\cdot Tb
  \end{aligned}
  \tag{4}
\]
and a morphism $f\colon b\to b'$ in $\Alg{\TT}$ is defined by a morphism $f\colon e\to e'$ in $\cat{E}$ such that $b$ is an algebra on $e$, $b'$ is an algebra on $e'$, and
\[
  f\cdot b
  = b'\cdot Tf.
  \tag{5}
\]
We denote by $\Kl{\TT}$ the \emph{Kleisli category} of $\TT$: it has the same objects as $\cat{E}$, and a morphism $g\colon e\to e'$ in $\Kl{\TT}$ is a morphism $g\colon Te\to Te'$ in $\cat{E}$ such that $g\colon Ke\to Ke'$ is a morphism in $\Alg{\TT}$.
\oldpage{224}
Recall that such a morphism is equivalent to giving a morphism $h\colon e\to Te'$, and that the composite of $h$ with another morphism $h'\colon e'\to Te''$ in $\Kl{\TT}$ is equal to $Ke''\cdot Th'\cdot h\colon e\to Te''$.
The forgetful functors $\Alg{\TT}\to\cat{E}$ and $\Kl{\TT}\to\cat{E}$ (with the latter sending the morphism $g\colon e\to e'$ in $\Kl{\TT}$ to the morphism $g\colon Te\to Te'$ in $\cat{E}$) admit adjoints, and $\TT$ is the triple induced form each of these adjoint pairs.

Recall, finally, that if $\TT$ is the triple induced by an adjoint pair $(F,U)$, then we have a commutative diagram
\[
  \begin{tikzcd}
    \Kl{\TT} \ar[r] \ar[dr]
  & \overline{\cat{E}} \ar[r] \ar[d]
  & \Alg{\TT} \ar[dl]
  \\
  & \cat{E}
  \end{tikzcd}
\]
with the horizontal arrows being furthermore unique whenever they make the diagram obtained by replacing the three functors to $\cat{E}$ with their adjoints commute.
The functor $\overline{\cat{E}}\to\Alg{\TT}$ is called the \emph{Eilenberg--Moore functor} associated to $(F,U)$, or simply to $U$.
When this functor is an isomorphism, we say that $U$ is \emph{tripleable}.
For example, the Eilenberg--Moore functor $\Kl{\TT}\to\Alg{\TT}$ is fully faithful, but not always injective.




\renewcommand{\thesection}{\Roman{section}}
\section{General properties of $\TT$-categories}
\label{sec:i}

\oldpage{225}
We are going to replace the morphism $b\colon Te\to e$ of a $\TT$-algebra, where $\TT$ is a triple on a category $\cat{E}$, by a span, i.e. by a pair of morphism in $\cat{E}$ with the same target
\[
  b\colon\pi\to e
  \textand
  a\colon\pi\to Te
\]
and define the notion of a $\TT$-category by adding data and conditions to this span, in a way that generalises the notion of a ``relational $\TT$-algebra'' of Barr \cite{Ba}.
In Chapter~II, we will see that this generalisation is natural;
below, we will draw inspiration from the ``global'' definition of a category in order to choose our axioms.


\subsection{$\TT$-categories}
\label{sub:i.1}

In the rest of this chapter, $\cat{E}$ will be a category admitting finite fibre products, and $\TT=(T,I,K)$ a triple on $\cat{E}$.

A \emph{$\TT$-graph} on an object $e\in\set{\cat{E}}$ is a pair $(b,a)$, where
\[
  b\colon\pi\to e
  \textand
  a\colon\pi\to Te
\]
are morphisms in $\cat{E}$.

A \emph{pointed $\TT$-graph} is a triple $(b,a,i)$ such that $(b,a)$ is a $\TT$-graph on $e$, and $i\colon e\to\pi$ is a morphism in $\cat{E}$ such that
\[
  b\cdot i = \id_e
  \textand
  a\cdot i= Ie.
  \tag{1}
\]
We then form a fibre product of $(a,Tb)$:
\[
  \begin{tikzcd}[sep=huge]
    T\pi
      \ar[d,swap,"Tb"]
  & \pi_2
      \ar[l,swap,"v_2"]
      \ar[d,"v_1"]
  \\Te
  & \pi
      \ar[l,"a"]
  \end{tikzcd}
\]
The relations
\[
  \begin{gathered}
    a\cdot\id_\pi
    = a
    = \id_{Te}\cdot a
    = Tb\cdot(Ti\cdot a)
  \\a\cdot(i\cdot b)
    = Ie\cdot b
    = Tb\cdot I\pi
  \end{gathered}
\]
imply the existence of \unsure{brackets} $i_1,i_2\colon\pi\to\pi_2$ such that
\[
  v_1\cdot i_1
  = \id_p
  \qquad
  v_2\cdot i_1
  = Ti\cdot a
  \tag{2}
\]
\[
  v_1\cdot i_2
  = i\cdot b
  \qquad
  v_2\cdot i_2
  = I\pi.
  \tag{3}
\]
\oldpage{226}
We then form a fibre product $(w_1,w_2)$ of $(v_2,Tv_1)$.
If $k\colon\pi_2\to\pi$ is a morphism that satisfies
\[
  \begin{aligned}
    b\cdot k
    &= b\cdot v_1
  \\a\cdot k
    &= Ke\cdot Ta\cdot v_2
  \end{aligned}
  \tag{4}
\]
then the relations
\[
  \begin{gathered}
    a\cdot(k\cdot w_1)
    = Ke\cdot Ta\cdot v_2\cdot w_1
    = Ke\cdot TTb\cdot Tv_2\cdot w_2
    = Tb\cdot(K\pi\cdot Tv_w\cdot w_2)
  \\a\cdot(v_1\cdot w_1)
    = Tb\cdot Tv_1\cdot w_2
    = Tb\cdot (Tk\cdot w_2)
  \end{gathered}
\]
imply the existence of \unsure{brackets} $k_1,k_2\colon\pi_3\to\pi_2$ such that
\[
  v_1\cdot k_1
  = k\cdot w_1
  \qquad
  v_2\cdot k_1
  = K\pi\cdot Tv_2\cdot w_2
  \tag{5}
\]
\[
  v_1\cdot k_2
  = v_1\cdot w_1
  \qquad
  v_2\cdot k_2
  = Tk\cdot w_2
  \tag{6}
\]

\begin{figure}
  \[
    \begin{tikzcd}[sep=6em]
      TTTe
        \ar[d,swap,"KTe",bend right=20]
        \ar[d,"TKe",bend left=20]
    & TT\pi
        \ar[l,swap,"TTa"]
        \ar[d,"K\pi"]
        \ar[dl,"TTb"]
    & T\pi_2
        \ar[l,swap,"Tv_2"]
        \ar[dl,swap,near start,"Tv_1"]
        \ar[dl,"Tk",bend left=20]
    & \pi_3
        \ar[l,swap,"w_2"]
        \ar[dl,swap,"w_1"]
        \ar[dl,swap,"k_2",bend left=30]
        \ar[dl,"k_1",bend left=50]
    \\TTe
        \ar[d,swap,"Ke"]
    & T\pi
        \ar[l,swap,"Ta"]
        \ar[dl,swap,"Tb"]
    & \pi_2
        \ar[l,swap,"v_2"]
        \ar[u,swap,"I\pi_2"]
        \ar[dl,swap,"v_1"]
        \ar[dl,swap,"k",bend left=25]
    \\Te
        \ar[u,near end,"ITe",bend left=40]
        \ar[u,swap,near end,"TIe",bend right=40]
        \ar[ur,swap,"Ti",bend right=20]
    & \pi
        \ar[l,swap,"a"]
        \ar[u,swap,"I\pi"]
        \ar[ur,"i_1",bend right=55]
        \ar[ur,swap,"i_2",bend right=70]
        \ar[dl,swap,"b"]
    \\e
        \ar[u,"Ie"]
        \ar[ur,swap,"i",bend right=25]
    \end{tikzcd}
  \]
  \caption{~}
\end{figure}

A \emph{$\TT$-category}, then, is a quadruple $\theta=(b,a,i,k)$ such that $(b,a,i)$ is a pointed $\TT$-graph and further satisfying axioms~(4), (5), (6), and (7) and (8) below:
\begin{enumerate}
  \item[(7)] $k\cdot i_1 = \id_\pi = k\cdot i_2$ (``identity'')
  \item[(8)] $k\cdot k_1 = k\cdot k_2$ (``associativity'').
\end{enumerate}

\begin{rmenv}{Remark}
  \oldpage{227}
  In reality, $\theta$ depends on the choice of the fibre products $(v_1,v_2)$ and $(w_1,w_2)$, and we call these pairs the fibre products \emph{associated} to the $\TT$-category $\theta$;
  their data is implicit in the quadruple $(b,a,i,k)$.
  We call $b$ and $a$ the \emph{target morphism} and \emph{source morphism} (respectively) in $\theta$;
  the object $e$ is denoted $\set{\theta}$ and called the \emph{object of objects} (or simply the \emph{objects object}), and the object $\pi$ is called the \emph{object of morphisms} (or simply the \emph{morphisms object}).
  More generally, $\pi_n$ for $n=0,1,2,3$, where $\pi_0=e$ and $\pi_1=\pi$, is called the \emph{object of paths of length $n$} in $\theta$.
  (All this terminology can also be applied to a $\TT$-graph.)

  When $\cat{E}$ is endowed with a canonical choice of fibre products, and $(v_1,v_2)$ and $(w_1,w_2)$ are canonically chosen, we say that $\theta$ is a \emph{canonical} (or \emph{official}) \emph{$\TT$-category}.
  In the case where $\cat{E}$ is endowed with such a choice, it will be implicit that the $\TT$-category is canonical, and we will explicitly point out if this is not the case.
  It is evident that to every non-canonical $\TT$-category there is an associated canonical $\TT$-category that has the same underlying $\TT$-graph, and that there is a unique isomorphism (see the definition of morphism that follows) between them.
  Conversely, if $\theta$ is a canonical $\TT$-category, then every other choice of two fibre products above gives exactly one non-canonical $\TT$-category to which it is isomorphic.
  This remark will be tacitly applied to other analogous structures.
\end{rmenv}

If $\theta=(b,a)$ and $\theta'=(b',a')$ are $\TT$-graphs, then a \emph{morphism} $f$ from $\theta$ to $\theta'$, also denoted $(f_0,f_1)\colon\theta\to\theta'$, is determined by a pair of morphisms $f_0\colon e\to e'$ and $f_1\colon\pi\to\pi'$ in $\cat{E}$ between the objects objects and the morphisms objects (respectively) that satisfies the following relations:
\[
  \begin{aligned}
    b'\cdot f_1
    &= f_0\cdot b
  \\a'\cdot f_1
    &= Tf_0\cdot a.
  \end{aligned}
  \tag{1'}
\]
We also denote $f_0$ by $\set{f}$ and call it the \emph{underlying morphism of $f$}.

If $\theta=(b,a,i)$ and $\theta'=(b',a',i')$ are pointed $\TT$-graphs, then a morphism $(f_0,f_1)\colon\theta\to\theta'$ is defined by a morphism of the underlying $\TT$-graphs that further satisfies
\[
  i'\cdot f_0
  = f_1\cdot i.
  \tag{2'}
\]

\oldpage{228}
Finally, let $\theta=(b,a,i,k)$ and $\theta'=(b',a',i',k')$ be $\TT$-categories;
if $(f_0,f_1)$ defines a morphism of the underlying pointed $\TT$-graphs, then there exist \unsure{brackets} $f_2\colon\pi_2\to\pi'_2$ and $f_3\colon\pi_3\to\pi'_3$ characterised by the relations
\[
  \begin{gathered}
    v'_1\cdot f_2
    = f_1\cdot v_1
    \qquad
    v'_2\cdot f_2
    = Tf_1\cdot v_2
  \\w'_1\cdot f_3
    = f_2\cdot w_1
    \qquad
    w'_2\cdot f_3
    = T f_2\cdot w_2
  \end{gathered}
\]
where $(v_1,v_2)$ and $(w_1,w_2)$ are the fibre products associated to $\theta$, and $(v'_1,v'_2)$ and $(w'_1,w'_2)$ are the fibre products associated to $\theta'$.
Then $(f_0,f_1)$ defines a \emph{morphism of $\TT$-categories}, or a \emph{$\TT$-functor}, $(f_0,f_1)\colon\theta\to\theta'$ if, further,
\[
  k'\cdot f_2
  = f_1\cdot k.
  \tag{3'}
\]

Let $\mathbf{2}$ be the category consisting of two objects, $0$ and $1$, and a single morphism $0\to1$ (apart from the two identity morphisms).
An object of $\cat{E}^\mathbf{2}$ can be identified with a morphism in $\cat{E}$, and $(g,g')\colon f\to f'$ can be associated to a morphism in $\cat{E}^\mathbf{2}$ if $g,g',f,f'$ are morphisms in $\cat{E}$ such that $f'\cdot g'=g\cdot f$.
If $\cat{E}$ admits fibre products, then so too does $\cat{E}^\mathbf{2}$, and, if $\TT=(T,I,K)$ is a triple on $\cat{E}$, then it induces a triple $\TT^\mathbf{2}$ on $\cat{E}^\mathbf{2}$, where $\TT^\mathbf{2}=(T^\mathbf{2},I^\mathbf{2},K^\mathbf{2})$, just as for any category of presheaves (i.e. of functors) with values in $\cat{E}$.
If $f\colon e\to e'$ is a morphism in $\cat{E}$, and thus an object in $\cat{E}^\mathbf{2}$, then $T^\mathbf{2}f=Tf$, and $I^\mathbf{2}f$ and $K^\mathbf{2}f$ are the following morphisms:
\[
  \begin{aligned}
    I^\mathbf{2}f
    &= (Ie',Ie)
    \colon f
    \to Tf
  \\K^\mathbf{2}f
    &= (Ke', Ke)
    \colon TTf
    \to Tf.
  \end{aligned}
\]
If $(g,g')\colon f\to f'$ is a morphism in $\cat{E}^\mathbf{2}$, then its image under $T^\mathbf{2}$ is, by definition, the morphism $(Tg,Tg')\colon Tf\to Tf'$ in $\cat{E}^\mathbf{2}$.

\begin{itenv}{Proposition~1.1.1}
  A $\TT^\mathbf{2}$-category is identifiable with a morphism of $\TT$-categories.
\end{itenv}

\begin{proof}
  The proof, which is elementary, is left to the reader;
  we simply note that, if $(f_0,f_1)\colon\theta\to\theta'$ is a morphism of $\TT$-categories, then $f_0$ is the objects object, and $f_1$ the morphisms object, of the associated $\TT^\mathbf{2}$-category.
\end{proof}

We can make analogous remarks for $\TT$-graphs and pointed $\TT$-graphs.

\oldpage{229}
If $\cat{E}$ is endowed with official finite fibre products, then we denote by $\Gr{\TT}$ and $\Cat{Cat}(\TT)$ the categories whose objects are the official $\TT$-graphs and the official $\TT$-categories (respectively).
If $\cat{E}$ admits finite fibre products without us having made an official choice, then we sometimes denote by $\Gr{\TT}$ and $\Cat{Cat}(\TT)$ the categories (which are equivalent to the above) whose objects are all $\TT$-graphs and all $\TT$-categories (respectively).
The composition laws in these categories are evident.


\subsection{$\TT$-preorders}
\label{sub:i.2}

A \emph{regular} $\TT$-graph is a $\TT$-graph $(b,a)$ such that the relations
\[
  b\cdot f = b\cdot f'
  \textand
  a\cdot f = a\cdot f'
\]
imply that $f=f'$.
A \emph{$\TT$-preorder} is a $\TT$-category whose underlying graph is regular.

\begin{itenv}{Proposition~1.2.2}
  If $(b,a)$ is a regular $\TT$-graph, $e$ the objects object, $\pi$ the morphisms object, $\pi_2$ the source of a fibre product of $(a,Tb)$, and $i\colon e\to\pi$ and $k\colon\pi_2\to\pi$ morphisms in $\cat{E}$ satisfying only conditions~(1) to (4) of \cref{sub:i.1}, then $(b,a,i,k)$ is a $\TT$-preorder.
  Furthermore, conditions~(2') and (3') are consequences of (1') for a morphism into a $\TT$-preorder.
\end{itenv}

\begin{proof}
  We have to show that the axioms of identity and associativity, (7) and (8) of \cref{sub:i.1}, are automatically satisfied.
  Since $(b,a)$ is regular, the relations
  \[
    \begin{gathered}
      k\cdot i_1
      = \pi
      = k\cdot i_2
    \\k\cdot k_1
      = k\cdot k_2
    \end{gathered}
  \]
  lead to the following equalities:
  \begin{enumerate}
    \item[($\alpha$)] $b\cdot k\cdot i_1=b=b\cdot k\cdot i_2$
    \item[($\beta$)] $a\cdot k\cdot i_1=a=a\cdot k\cdot i_2$
    \item[($\gamma$)] $b\cdot k\cdot k_1=b\cdot k\cdot k_2$
    \item[($\delta$)] $a\cdot k\cdot k_1=a\cdot k\cdot k_2$.
  \end{enumerate}
  Indeed,
  \oldpage{230}
  \[
    b\cdot k\cdot i_1
    \underset{(4)}{=} b\cdot v_1\cdot i_1
    \underset{(2)}{=} b
  \]
  and similarly
  \[
    b\cdot k\cdot i_2
    = b\cdot v_1\cdot i_2
    \underset{(3)}{=} b\cdot i\cdot b
    \underset{(1)}{=} b
  \]
  which proves ($\alpha$).
  Next,
  \[
    \begin{aligned}
      a\cdot k\cdot i_1
      &\underset{(4)}{=} Ke\cdot Ta\cdot v_2\cdot i_1
      = Ke\cdot Ta\cdot Ti\cdot a
    \\&= Ke\cdot T(a\cdot i)\cdot a
      \underset{(1)}{=} Ke\cdot TIe\cdot a
    \\&= a
    \end{aligned}
  \]
  and
  \[
    \begin{aligned}
      a\cdot k\cdot i_2
      &= Ke\cdot Ta\cdot v_2\cdot i_2
    \\&= Ke\cdot Ta\cdot I\pi
      =Ke\cdot ITe\cdot a
    \\&= a
    \end{aligned}
  \]
  which proves ($\beta$).
  Then
  \[
    \begin{aligned}
      b\cdot k\cdot k_1
      &= b\cdot v_1\cdot k_1
      = b\cdot k\cdot w_1
    \\&= b\cdot v_1\cdot w_1
      = b\cdot v_1\cdot k_2
    \\&= b\cdot k\cdot k_2
    \end{aligned}
  \]
  whence ($\gamma$).
  Finally,
  \[
    \begin{aligned}
      a\cdot k\cdot k_1
      &= Ke\cdot Ta\cdot v_2\cdot k_1
      = Ke\cdot Ta\cdot K\pi\cdot Tv_2\cdot w_2
    \\&= Ke\cdot KTe\cdot TTa\cdot Tv_2\cdot w_2
      = Ke\cdot TKe\cdot TTa\cdot Tv_2\cdot w_2
    \\&= Ke\cdot T(Ke\cdot Ta\cdot v_2)\cdot w_2
      = Ke\cdot T(a\cdot k)\cdot w_2
    \\&= Ke\cdot Ta\cdot Tk\cdot w_2
      = Ke\cdot Ta\cdot v_2\cdot k_2
    \\&= a\cdot k\cdot k_2
    \end{aligned}
  \]
  which proves ($\delta$).
  The verification of the last claim of the proposition is easy.
\end{proof}

This proposition allows us to identify a $\TT$-preorder with its underlying $\TT$-graph, and to sometimes write $(b,a)$ instead of $(b,a,i,k)$ for a $\TT$-preorder.
Amongst all $\TT$-preorders, many interesting cases can be distinguished by properties of by $a$ and $b$ (see the examples in \cref{sec:iv}).
We limit ourselves to noting the following fact:

\begin{itenv}{Proposition~1.2.3}
  A $\TT$-algebra $b$ over $e$ can be identified with a $\TT$-preorder $(b,a)$ such that $a=\id_{Te}$, and conversely.
\end{itenv}

\begin{proof}
  This is completely evident, since the relation $a=\id_{Te}$ implies that $i=Ie$, $Ta=v_2=\id_{TTe}$, and $k=Ke$.
\end{proof}

\oldpage{231}
We denote by $\Ord{\TT}$ and $\Alg{\TT}$ the full subcategories of the category $\Gr{\TT}$ whose objects are the $\TT$-preorders and the $\TT$-algebras (respectively).
We have just seen that $\Alg{\TT}$ can be identified with the usual category of $\TT$-algebras.
Furthermore, when $\cat{E}=\Cat{Set}$ is the category of sets associated to a universe, we have:

\begin{itenv}{Proposition~1.2.4}
  If $\cat{E}=\Cat{Set}$, then the category $\Ord{\TT}$ is equivalent to the category of ``relational $\TT$-algebras'' of Barr {\cite{Ba}}.
\end{itenv}

\begin{proof}
  A ``relational $\TT$-prealgebra'' is a relation $r\colon Te\to e$.
  It is defined by a subset $\pi$ of $e\times Te$, which defines a regular $\TT$-graph $(b,a)$ by taking $b$ and $a$ to be the composite of the inclusion $\pi\to e\times Te$ with the projections $e\times Te\to e$ and $e\times Te\to Te$ (respectively).
  This is a ``relational $\TT$-algebra'' if it further satisfies the conditions:
  \begin{enumerate}
    \item[(1)] $\id_e\subset r\cdot Ie$
    \item[(2)] $r\cdot\tilde{T}r\subset r\cdot Ke$
  \end{enumerate}
  where $\tilde{T}r\colon TTe\to Te$ is the relation defined by the set
  \[
    \hat{\pi}
    = \big\{
      \big(Tb(z), Ta(z)\big)
      \mid z\in T\pi
    \big\}
    \subset Te\times TTe.
  \]
\end{proof}




%% Bibliography %%

\nocite{*}
\printbibliography[heading=bibintoc,title=Bibliography]

\end{document}
